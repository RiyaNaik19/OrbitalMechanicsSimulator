<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orbital Mechanics Simulator</title>
    <style>
        :root {
            --color-bg: #0a0e27;
            --color-surface: #1a1f3a;
            --color-text: #e0e6ff;
            --color-primary: #00d4ff;
            --color-accent: #ff6b6b;
            --color-success: #51cf66;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 10px;
            color: var(--color-primary);
            font-size: 2em;
        }
        
        .subtitle {
            text-align: center;
            color: var(--color-text);
            margin-bottom: 30px;
            opacity: 0.8;
        }
        
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .canvas-container {
            background-color: var(--color-surface);
            border-radius: 10px;
            padding: 15px;
            border: 2px solid var(--color-primary);
        }
        
        canvas {
            display: block;
            width: 100%;
            background-color: #000;
            border-radius: 8px;
        }
        
        .controls {
            background-color: var(--color-surface);
            border-radius: 10px;
            padding: 20px;
            border: 2px solid var(--color-primary);
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--color-primary);
        }
        
        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--color-accent);
            outline: none;
            -webkit-appearance: none;
            margin-bottom: 8px;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
            border: none;
        }
        
        .value-display {
            font-size: 0.9em;
            color: var(--color-success);
            background-color: rgba(81, 207, 102, 0.2);
            padding: 8px;
            border-radius: 5px;
            text-align: center;
        }
        
        .buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            flex: 1;
            padding: 12px 20px;
            font-size: 1em;
            font-weight: 600;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background-color: var(--color-primary);
            color: var(--color-bg);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 212, 255, 0.3);
        }
        
        .btn-secondary {
            background-color: var(--color-accent);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(255, 107, 107, 0.3);
        }
        
        .info-box {
            background-color: var(--color-surface);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid var(--color-success);
            margin-bottom: 20px;
        }
        
        .info-box h3 {
            color: var(--color-success);
            margin-bottom: 10px;
        }
        
        .info-box p {
            font-size: 0.95em;
            line-height: 1.6;
            color: var(--color-text);
            opacity: 0.9;
        }
        
        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-item {
            background-color: rgba(0, 212, 255, 0.1);
            border: 1px solid var(--color-primary);
            border-radius: 6px;
            padding: 15px;
            text-align: center;
        }
        
        .stat-label {
            font-size: 0.85em;
            color: var(--color-primary);
            margin-bottom: 8px;
        }
        
        .stat-value {
            font-size: 1.3em;
            font-weight: bold;
            color: var(--color-success);
            font-family: 'Courier New', monospace;
        }
        
        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåç Orbital Mechanics Simulator üöÄ</h1>
        <p class="subtitle">Simulate planetary orbits using Newton's Laws of Gravity</p>
        
        <div class="info-box">
            <h3>üìö How It Works</h3>
            <p>This simulator uses Newton's Law of Universal Gravitation (F = G√óm‚ÇÅ√óm‚ÇÇ/r¬≤) to calculate the gravitational force between objects, then integrates the equations of motion with a stable semi‚Äëimplicit Euler method.</p>
        </div>
        
        <div class="content">
            <div class="canvas-container">
                <canvas id="canvas" width="500" height="500"></canvas>
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">ORBITAL SPEED</div>
                        <div class="stat-value" id="speedValue">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">DISTANCE FROM SUN</div>
                        <div class="stat-value" id="distanceValue">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">GRAVITATIONAL FORCE</div>
                        <div class="stat-value" id="forceValue">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">ORBITAL PERIOD</div>
                        <div class="stat-value" id="periodValue">0 s</div>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <div class="control-group">
                    <label for="initialVelocity">üéØ Initial Velocity (m/s)</label>
                    <input type="range" id="initialVelocity" min="5000" max="15000" value="8000" step="100">
                    <div class="value-display" id="velocityDisplay">8000 m/s</div>
                </div>
                
                <div class="control-group">
                    <label for="orbitalDistance">üìç Orbital Distance (km)</label>
                    <input type="range" id="orbitalDistance" min="7000" max="50000" value="8000" step="100">
                    <div class="value-display" id="distanceDisplay">8000 km</div>
                </div>
                
                <div class="control-group">
                    <label for="timeStep">‚è±Ô∏è Time Step (s)</label>
                    <input type="range" id="timeStep" min="1" max="50" value="10" step="1">
                    <div class="value-display" id="timeStepDisplay">10 s</div>
                </div>
                
                <div class="control-group">
                    <label for="trailLength">üëÅÔ∏è Trail Length</label>
                    <input type="range" id="trailLength" min="10" max="500" value="100" step="10">
                    <div class="value-display" id="trailDisplay">100 points</div>
                </div>
                
                <div class="buttons">
                    <button class="btn-primary" onclick="startSimulation()">‚ñ∂Ô∏è START</button>
                    <button class="btn-secondary" onclick="resetSimulation()">üîÑ RESET</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        // Physics constants (SI units) [web:1][web:7]
        const G = 6.674e-11;          // gravitational constant
        const M_EARTH = 5.972e24;     // mass of Earth (kg)
        const R_EARTH = 6371e3;       // radius Earth (m)

        // Visualization scale: meters -> pixels
        // 1,000,000 m = 1 pixel (tweak if you want)
        const SCALE = 1e-6;

        // Velocity vector drawing scale (for arrow length)
        const VEC_SCALE = 0.02;

        // Planet object (all positions in meters, velocities in m/s)
        let planet = {
            x: 0,
            y: 0,
            vx: 0,
            vy: 0,
            mass: 1e24,
            trail: [],
            orbitalSpeed: 0,
            orbitalDistance: 0,
            gravitationalForce: 0,
            orbitalPeriod: 0
        };
        
        // Sun at origin in physics space, drawn at canvas center
        let sun = {
            x: 0,
            y: 0,
            mass: M_EARTH
        };
        
        let isRunning = false;
        let simulationTime = 0;
        let orbitStartPoint = null;

        function toCanvasX(xMeters) {
            return canvas.width / 2 + xMeters * SCALE;
        }

        function toCanvasY(yMeters) {
            return canvas.height / 2 + yMeters * SCALE;
        }
        
        function initializeOrbit() {
            const velocity = parseFloat(document.getElementById('initialVelocity').value);        // m/s
            const distance = parseFloat(document.getElementById('orbitalDistance').value) * 1e3;  // km -> m
            
            // Sun stays at origin (0,0) in physics coordinates
            sun.x = 0;
            sun.y = 0;
            
            // Planet to the right at 'distance'
            planet.x = distance;
            planet.y = 0;
            planet.vx = 0;
            planet.vy = velocity; // tangential velocity
            
            planet.orbitalDistance = distance;
            planet.trail = [];
            planet.gravitationalForce = 0;
            planet.orbitalSpeed = Math.abs(velocity);
            planet.orbitalPeriod = 0;

            simulationTime = 0;
            orbitStartPoint = { x: planet.x, y: planet.y };
        }
        
        function calculateGravitationalForce() {
            const dx = sun.x - planet.x;
            const dy = sun.y - planet.y;
            const distSquared = dx * dx + dy * dy;
            const dist = Math.sqrt(distSquared);
            
            // Avoid division by zero
            if (dist === 0) {
                return { ax: 0, ay: 0, forceMagnitude: 0, dist: 0 };
            }

            // Gravitational force [web:1][web:3]
            const forceMagnitude = (G * sun.mass * planet.mass) / distSquared;
            
            // Acceleration components (F = m a)
            const ax = (forceMagnitude / planet.mass) * (dx / dist);
            const ay = (forceMagnitude / planet.mass) * (dy / dist);
            
            return { ax, ay, forceMagnitude, dist };
        }
        
        function updatePhysics() {
            const timeStep = parseFloat(document.getElementById('timeStep').value); // seconds
            
            const { ax, ay, forceMagnitude, dist } = calculateGravitationalForce();
            
            // Semi-implicit Euler: update velocity then position [web:26][web:44]
            planet.vx += ax * timeStep;
            planet.vy += ay * timeStep;
            
            planet.x += planet.vx * timeStep;
            planet.y += planet.vy * timeStep;
            
            // Orbital speed
            planet.orbitalSpeed = Math.sqrt(planet.vx * planet.vx + planet.vy * planet.vy);
            
            // Distance from sun
            planet.orbitalDistance = dist;
            planet.gravitationalForce = forceMagnitude;
            
            // Trail in physics coordinates
            const trailLength = parseInt(document.getElementById('trailLength').value);
            planet.trail.push({ x: planet.x, y: planet.y });
            if (planet.trail.length > trailLength) {
                planet.trail.shift();
            }
            
            // Estimate orbital period: when we come back near start point
            simulationTime += timeStep;
            if (orbitStartPoint) {
                const dx0 = planet.x - orbitStartPoint.x;
                const dy0 = planet.y - orbitStartPoint.y;
                const distFromStart = Math.sqrt(dx0 * dx0 + dy0 * dy0);
                
                // Tolerance ~100 km in meters
                if (distFromStart < 1e5 && simulationTime > 100 && planet.orbitalPeriod === 0) {
                    planet.orbitalPeriod = simulationTime;
                }
            }
        }
        
        function draw() {
            // Clear canvas
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw trail
            if (planet.trail.length > 1) {
                ctx.strokeStyle = 'rgba(0, 212, 255, 0.3)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(toCanvasX(planet.trail[0].x), toCanvasY(planet.trail[0].y));
                for (let i = 1; i < planet.trail.length; i++) {
                    ctx.lineTo(toCanvasX(planet.trail[i].x), toCanvasY(planet.trail[i].y));
                }
                ctx.stroke();
            }
            
            // Draw sun at canvas center
            ctx.fillStyle = '#ffaa00';
            ctx.shadowColor = 'rgba(255, 170, 0, 0.6)';
            ctx.shadowBlur = 15;
            ctx.beginPath();
            ctx.arc(canvas.width / 2, canvas.height / 2, 12, 0, Math.PI * 2);
            ctx.fill();
            ctx.shadowBlur = 0;
            
            // Draw planet
            const px = toCanvasX(planet.x);
            const py = toCanvasY(planet.y);

            ctx.fillStyle = '#00d4ff';
            ctx.shadowColor = 'rgba(0, 212, 255, 0.6)';
            ctx.shadowBlur = 10;
            ctx.beginPath();
            ctx.arc(px, py, 8, 0, Math.PI * 2);
            ctx.fill();
            ctx.shadowBlur = 0;
            
            // Draw velocity vector
            ctx.strokeStyle = 'rgba(81, 207, 102, 0.8)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(px, py);
            ctx.lineTo(px + planet.vx * VEC_SCALE, py + planet.vy * VEC_SCALE);
            ctx.stroke();
            
            // Update stats (convert back to km, etc.)
            document.getElementById('speedValue').textContent =
                planet.orbitalSpeed.toFixed(0) + ' m/s';
            
            document.getElementById('distanceValue').textContent =
                (planet.orbitalDistance / 1e3).toFixed(0) + ' km';
            
            document.getElementById('forceValue').textContent =
                (planet.gravitationalForce / 1e20).toFixed(2) + 'e20 N';
            
            document.getElementById('periodValue').textContent =
                planet.orbitalPeriod > 0 ? planet.orbitalPeriod.toFixed(0) + ' s' : 'calculating...';
        }
        
        function animationLoop() {
            if (isRunning) {
                updatePhysics();
            }
            draw();
            requestAnimationFrame(animationLoop);
        }
        
        function startSimulation() {
            if (!isRunning) {
                initializeOrbit();
                isRunning = true;
            }
        }
        
        function resetSimulation() {
            isRunning = false;
            initializeOrbit();
            draw();
        }
        
        // Slider UI updates
        document.getElementById('initialVelocity').addEventListener('input', (e) => {
            document.getElementById('velocityDisplay').textContent = e.target.value + ' m/s';
            if (!isRunning) resetSimulation();
        });
        
        document.getElementById('orbitalDistance').addEventListener('input', (e) => {
            document.getElementById('distanceDisplay').textContent = e.target.value + ' km';
            if (!isRunning) resetSimulation();
        });
        
        document.getElementById('timeStep').addEventListener('input', (e) => {
            document.getElementById('timeStepDisplay').textContent = e.target.value + ' s';
        });
        
        document.getElementById('trailLength').addEventListener('input', (e) => {
            document.getElementById('trailDisplay').textContent = e.target.value + ' points';
        });
        
        // Initialize and start render loop
        initializeOrbit();
        animationLoop();
    </script>
</body>
</html>
